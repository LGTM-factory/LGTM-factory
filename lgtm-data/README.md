# LGTM Factory にデザインテーマを追加するガイド

LGTM Factory は、主に開発者の使用を想定しています。

- GitHub 上のテキストコミュニケーションを、楽しくするため
- 開発チームの独自のカルチャーを育み、一体感を養うため

それらを実現するために、LGTM Factory には、<br>
様々なデザインテーマが用意されています 🎨

そして、LGTM Factory は、オープンソースのプロジェクトでもあります！<br>
誰でも、開発に参加することができます:

- デザインのみ
- コーディングのみ
- デザインとコーディングの両方

LGTM Factory への貢献（コントリビューション）を始めるには、下記のガイドを参照してください！<br>
完全第一で、取り組んで参ります ⛑️:)

## 目次

- [`lgtm-data`ディレクトリについて](#lgtm-dataディレクトリについて)
- [画像生成の仕組みについて](#画像生成の仕組みについて)
- [デザインテーマ作成前の注意事項](#デザインテーマ作成前の注意事項)
- [どのように LGTM Factory にデザインテーマを追加すればいいの？](どのように LGTM Factory にデザインテーマを追加すればいいの？)

このドキュメントは、以下の目的で作成されました：

- LGTM 画像のデザインデータを、１箇所で適切に管理するため
- 全てのコントリビューターが、迷わずにデザインを追加できるようにするため

## `lgtm-data`ディレクトリについて

あなたが今閲覧している、このドキュメントは、`lgtm-data`ディレクトリ内にあります。<br>
このディレクトリには、全ての LGTM 画像のデザインデータが、格納されています。

なので、`lgtm-data`ディレクトリ内に、新たなファイルを追加することで、<br>
自動で Web サイトにもデザインが追加されます！

## 画像生成の仕組みについて

（もし興味がなければ、このセクションは飛ばしてください 😎）

LGTM Factory は、<br>
単純な HTML と CSS のコードから、画像を生成しています！

もし、あなたが Web 開発者であれば、<br>
Web サイト・UI コンポーネントを作成するように、LGTM ステッカーを作成できます。

画像生成の仕組みについて、<br>
具体的には、`@vercel/og`の`ImageResponse`という機能で、画像生成を行っています。

`ImageResponse`の特徴として、画像デザインでは、:

- 動的な値を受け取ることができます
- 画像素材を使用することもできます
- Tailwind CSS で、スタイリングを行うこともできます

もし、この技術をさらに詳しく知りたい方は、以下のリソースを参照してください！

- [公式ドキュメント](https://nextjs.org/docs/app/api-reference/functions/image-response)
- [@vercel/og で動的な画像を生成するガイド【Next.js】](https://zenn.dev/kazzyfrog/articles/next-image-response-guide)

## デザインテーマ作成前の注意事項

LGTM Factory は、[行動規範](/.github/CODE_OF_CONDUCT.md)に従い、<br>
全ての開発者・デザイナーの貢献を歓迎します 💚

LGTM 画像のデザインを追加する前に、以下の注意事項をご確認ください：

- 全てのコントリビューターが追加したデザインやコードには、LGTM Factory が定めるオープンソースライセンスが適用されます
  - 同時に、あなたが有している著作物、もしくは使用が許可されているリソース以外を、追加することはできません
- コードを追加する前に、デザインの時点で、メンテナーやコミュニティのメンバーからのフィードバックを受けることもできます
  - その場合は、⚠️⚠️⚠️ToDo: デザインのみの貢献用の経路を用意する

そして、何か不明点・懸念点がある場合は、<br>
いつでもメンテナーからのサポートを受けられることを、忘れないでください 🙌

## どのように LGTM Factory にデザインテーマを追加すればいいの？

> テンプレを使用できるので、作業の大半はメインのデザイン&コーディングに集中できます 🚀

では、実際に、<br>
デザインテーマを追加する手順を紹介していきます。

次の通り、簡単な５ステップです:)

1. 開発環境を整える
1. 新たなファイルを作成する
1. 新たなファイルに、テンプレートを貼り付ける
1. 変更を加え、独自のデザインデータを作成する
1. 変更を commit & push、そして Pull Request を作成する 🎉

そして、

- もし助けが必要な場合、Discussions で質問してください！
- このプロジェクトに関する改善点を見つけた場合は、Issues から報告してください！
- 作業途中であっても、Pull Request を作成することで、メンテナーからのアドバイスを受けることができます！

### 1.開発環境を整える

初めて LGTM Factory にコントリビュートする方向けに、<br>
簡潔に、環境構築の手順を記載していきます。

1. GitHub 上から、このリポジトリをフォークする
1. フォークしたリポジトリを、ローカルマシンにクローンする
1. リポジトリのディレクトリ内に移動し、作業用ブランチを作成する
   - ⚠️`<new-file>`は、あなたが追加するファイル名に置き換えてください
   ```zsh
     git switch -c add-design-theme-<new-file>
   ```

ここまでで、開発環境の準備は完了です 🛠️

### 2.新たなファイルを作成する

次に、あなたのデザインを記載するファイルを作成します！

以下のような、ファイルを新たに作成するだけです 👍<br>
`colorful-circle-emoji.jsx`

その際、注意して欲しいポイントが、いくつかあります：

1. 作成するファイルの拡張子は、`.jsx` にしてください。
1. ファイル名は、あなたのデザインを表す、意味のある名前をつけてください。
   - 例 1: 「design-001」は、中身のデザインが分かりにくいので、不適切だと言えます。
   - 例 2:「colorful-circle-emoji」は、デザインの中身がある程度想像できるため、適切だと言えます。
   - とは言え、そこまで厳密ではないですよ 😈
1. ファイル名は、既存のファイルと重複する名前では作成できません。
   - ファイル名は、そのままデザインを識別する`slug`として使用されるので、固有の名前をつける必要があります。

ここまでで、ファイルを作成しました！<br>
デザインを識別する名前も決まりました！！☕️

### 3.新たなファイルに、テンプレートを貼り付ける

前のステップで作成したファイルに、これからデザインのコードを追加していきます！

その際、下記のテンプレートを使用できます:

⚠️⚠️⚠️ToDo: テンプレートを最新のものに更新する。引数の受け取り方も決める。オプションも。デフォルトのインラインスタイルと、TailwindCSS のバージョンも２つを、アコーディオンにしまう。

<details>
  <summary>テンプレート1: インラインスタイル</summary>

```jsx
export default function getLgtmData = (emoji) => {

  // 下記に、作成するLGTM画像のオプションを記述します。
  const options = {
    width: 1200,
    height: 630,
  };

  // 下記に、作成するLGTM画像をコーディングします。
  const jsx = (
    <div
      style={{
        height: "100%",
        width: "100%",
        display: "flex",
        flexDirection: "column",
        alignItems: "center",
        justifyContent: "center",
        backgroundColor: "#fff",
        fontSize: 32,
        fontWeight: 600,
      }}
    >
      <p
        style={{
          fontSize: "128",
        }}
      >
        {emoji === null ? "🫠" : emoji}
      </p>
      <div style={{ marginTop: 0 }}>Looks Good To Me</div>
    </div>
  );

  return { jsx, options };
};
```

<details>
  <summary>テンプレート2: Tailwind CSSによるスタイリング</summary>

```jsx
export default function getLgtmData = (emoji) => {

  // 下記に、作成するLGTM画像のオプションを記述します。
  const options = {
    width: 1200,
    height: 630,
  };

  // 下記に、作成するLGTM画像をコーディングします。
  const jsx = (
    //
  );

  return { jsx, options };
};
```

</details>

テンプレートを使用したことにより、既に問題なく新たなデザインテーマを追加することができました！<br>
あとは、コードの中身を、独自のデザインに変更していくだけですね 🥂

### 4.変更を加え、独自のデザインデータを作成する

前のステップで貼り付けた、<br>
テンプレートのコードの部分を簡略化すると、以下のようになります：

```jsx
export default function getLgtmData = () => {

  // 下記に、作成するLGTM画像のオプションを記述します。
  const options = {
    ~~
  };

  // 下記に、作成するLGTM画像をコーディングします。
  const jsx = (
    ~~
  );

  return { jsx, options };
};
```

見てわかる通り、<br>
**JSX エレメントと、オプションを返す関数が作成されています**！

なので、あなたが変更を加えるのは、以下の２つです：

- オプション
- JSX エレメント

1. **オプションについて**

   - 現在、使用可能なオプションは、以下の通りです
     - 画像のサイズ：横幅`width`と、高さ`height`
     - 絵文字フォントの種類：`emoji`
     - テキストのフォントの種類: `fonts`
   - 実際のコードでは、以下のようにオプションを記述できます
     ```jsx
     options: {
      width?: number = 1200
      height?: number = 630
      emoji?: 'twemoji' | 'blobmoji' | 'noto' | 'openmoji' = 'twemoji',
      fonts?: {
        name: string,
        data: ArrayBuffer,
        weight: number,
        style: 'normal' | 'italic'
     }
     ```
   - テキストのフォントの種類については、⚠️⚠️⚠️ToDo: フォントの扱い方を決め、追記する。

2. **JSX エレメントと、動的な値について**

そして、実際に HTML, CSS などのコードを書いていきます。

その際、以下のコマンドを使用して、ローカル環境でサーバーを立ち上げることができます:

```zsh
npm run preview
```

### 5.変更を commit&push、そして Pull Request を作成する 🎉

作業が完了しましたか、、？
そしたら、最後に以下を確認してください：

- getLgtmData 関数を、デフォルトエクスポートしている
- getLgtmData 関数の戻り値は、オプションと JSX エレメントの 2 つ
- `npm run preview`でローカルサーバーを立ち上げ、画像の表示に問題がないことが確認できた

もちろん、作業途中であっても、Pull Request を作成することで、メンテナーからのアドバイスを受けることができます！

問題なければ、

1. 変更をコミットする。
   ```
   git add .
   git commit -m "theme: ⛑️ add design theme <new-file>"
   ```
1. 変更をリポートリポジトリに、プッシュする
   ```
   git push origin HEAD
   ```
1. プルリクエストを作成する

お疲れ様です 🫡<br>
そして、LGTM Factory に貢献（コントリビューション）していただき、ありがとうございます 🎉🎉
⚠️⚠️⚠️ToDo: thanks 画像が用意できたら、貼る。
